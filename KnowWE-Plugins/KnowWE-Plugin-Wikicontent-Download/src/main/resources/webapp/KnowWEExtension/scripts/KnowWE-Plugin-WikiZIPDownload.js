(function(i,V){"use strict";var Q=document.createElement("style");Q.textContent=`.snapshots-panel,.snapshot-popup-content{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Liberation Sans,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}.snapshots-panel button,.snapshots-panel h1,.snapshots-panel h2,.snapshots-panel h3,.snapshots-panel h4,.snapshots-panel h5,.snapshots-panel pre,.snapshots-panel .info,.snapshot-popup-content button,.snapshot-popup-content h1,.snapshot-popup-content h2,.snapshot-popup-content h3,.snapshot-popup-content h4,.snapshot-popup-content h5,.snapshot-popup-content pre,.snapshot-popup-content .info{margin:0;padding:0}.snapshots-panel input,.snapshot-popup-content input{border:none;background:transparent}.snapshots-panel input::placeholder,.snapshot-popup-content input::placeholder{color:#adadad}.snapshots-panel a,.snapshots-panel a:hover,.snapshot-popup-content a,.snapshot-popup-content a:hover{color:#000;text-decoration:none}.snapshots-panel ul,.snapshots-panel ol,.snapshot-popup-content ul,.snapshot-popup-content ol{list-style:none;padding:0}.snapshots-panel .btn,.snapshot-popup-content .btn{padding:.35rem .9rem;font-weight:500;font-size:1.1rem;transition:background-color .1s}.snapshots-panel .btn-small,.snapshot-popup-content .btn-small{padding:.175rem .7rem}.snapshots-panel .btn-default:hover,.snapshot-popup-content .btn-default:hover{background-color:var(--hover-bg-color-btn-default);color:var(--hover-text-color-btn-default)}.snapshots-panel .btn-default,.snapshot-popup-content .btn-default{color:#fff;background-color:#000}.snapshots-panel .btn-unavailable,.snapshots-panel button[disabled],.snapshot-popup-content .btn-unavailable,.snapshot-popup-content button[disabled]{color:#fff;background-color:#828282;cursor:not-allowed}.snapshots-panel .btn-danger,.snapshot-popup-content .btn-danger{background-color:var(--text-color-error)}.snapshots-panel pre,.snapshots-panel .info,.snapshot-popup-content pre,.snapshot-popup-content .info{background-color:unset;border:none}.snapshots-panel code,.snapshot-popup-content code{font-family:JetBrains Mono,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier New,monospace;background:none;border-radius:0}.snapshots-panel .truncate,.snapshot-popup-content .truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.snapshots-panel .relative,.snapshot-popup-content .relative{position:relative}.snapshots-panel .absolute,.snapshot-popup-content .absolute{position:absolute}.snapshots-panel .flex,.snapshot-popup-content .flex{display:flex;align-items:center}.snapshots-panel .flex-1,.snapshot-popup-content .flex-1{flex:1}.snapshots-panel i.transform-down,.snapshot-popup-content i.transform-down{transform:rotate(90deg)}#popup-root .snapshot-popup-content.popup-content{min-width:50rem;max-width:60rem;padding:0;border-radius:.2rem;background:var(--bg-color-primary-shade);box-shadow:0 2px 4px #00000040}#popup-root .snapshot-popup-content.popup-content main,#popup-root .snapshot-popup-content.popup-content footer,#popup-root .snapshot-popup-content.popup-content h2{margin-left:4.5rem;margin-right:4.5rem}#popup-root .snapshot-popup-content.popup-content header button{margin:0;border:0;background:none}#popup-root .snapshot-popup-content.popup-content header button i{font-size:1.85rem;color:#949494}#popup-root .snapshot-popup-content.popup-content header .buttons{text-align:right;margin-top:2rem;margin-right:2rem}#popup-root .snapshot-popup-content.popup-content h2{font-size:2rem;font-weight:500}#popup-root .snapshot-popup-content.popup-content .error-title{color:red}#popup-root .snapshot-popup-content.popup-content main{margin-top:2rem;font-size:1.2rem}#popup-root .snapshot-popup-content.popup-content main form{margin-top:1.5rem}#popup-root .snapshot-popup-content.popup-content main form .input-group{max-width:40rem;width:100%;margin:1rem 0}#popup-root .snapshot-popup-content.popup-content main form label{display:block;margin-bottom:.2rem;font-weight:600;font-size:1rem;color:#2b2b2b}#popup-root .snapshot-popup-content.popup-content main form input{display:block;width:100%;padding:.4rem .8rem;border-radius:.25rem;border:1px solid #E5E5E5;background-color:#d9d9d9;font-size:1.2rem;font-weight:400}#popup-root .snapshot-popup-content.popup-content main form input:focus-within{border:1px solid #6C6C6C}#popup-root .snapshot-popup-content.popup-content main form .helper-text{font-size:1rem;margin-top:.25rem;margin-bottom:0}#popup-root .snapshot-popup-content.popup-content main .select{width:20rem;margin:1rem 0}#popup-root .snapshot-popup-content.popup-content footer{display:flex;gap:1rem;margin-top:3rem;margin-bottom:4rem}.snapshots-panel{display:inline-block;padding:1rem;min-width:35rem}.snapshots-panel .upload-button:hover label{background-color:var(--hover-bg-color-btn-default);color:var(--hover-text-color-btn-default);border-color:#adadad}.snapshots-panel button i,.snapshots-panel label i{margin-right:.5rem}.snapshots-panel .context-menu button.context-menu{padding-left:.75rem;padding-right:.75rem;padding-top:.5rem}.snapshots-panel .context-menu button.context-menu i{font-size:1.2rem;margin-right:0}.snapshots-panel .context-menu .options{display:inline-block;left:0;top:2.75rem;padding:.5rem .7rem;background-color:var(--bg-color-secondary);border:1px solid #DBDBDB;border-radius:.4rem;box-shadow:0 1px 4px #0003;z-index:10}.snapshots-panel .context-menu .options li{display:block;min-width:8rem;margin-bottom:.2rem}.snapshots-panel .context-menu .options li button{background:none;border:none}.snapshots-panel .context-menu .options li i{width:1rem;margin-right:.75rem}.snapshots-panel .buttons{display:flex;gap:1rem;margin-bottom:3rem}.snapshots-panel h3{display:inline-block;font-weight:500;font-size:1.3rem!important;vertical-align:bottom;margin:0}.snapshots-panel .headline h3{margin-bottom:.1rem}.snapshots-panel .counter{display:inline-flex;width:1.75rem;height:1.75rem;align-items:center;vertical-align:middle;margin-left:1rem;border-radius:50%;background-color:var(--color-grey-light);font-size:1rem;font-weight:600}.snapshots-panel .counter span{margin:auto}.snapshots-panel .snapshots-table{margin-top:1rem;margin-bottom:2rem}.snapshots-panel .snapshots-table td{width:38rem;max-width:38rem;padding:0 1rem .75rem 0;font-size:1.1rem}.snapshots-panel .upload-button{display:inline-block;position:relative}.snapshots-panel input[type=file]{position:absolute;top:0;right:0;width:100%;height:100%;opacity:0;font-size:0;cursor:pointer}
/*$vite$:1*/`,document.head.appendChild(Q);var K={exports:{}},T={};var Z;function Ne(){if(Z)return T;Z=1;var e=i,t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function l(f,a,u){var d,m={},b=null,h=null;u!==void 0&&(b=""+u),a.key!==void 0&&(b=""+a.key),a.ref!==void 0&&(h=a.ref);for(d in a)r.call(a,d)&&!p.hasOwnProperty(d)&&(m[d]=a[d]);if(f&&f.defaultProps)for(d in a=f.defaultProps,a)m[d]===void 0&&(m[d]=a[d]);return{$$typeof:t,type:f,key:b,ref:h,props:m,_owner:c.current}}return T.Fragment=o,T.jsx=l,T.jsxs=l,T}var B;function Pe(){return B||(B=1,K.exports=Ne()),K.exports}var n=Pe(),I={},ee;function Ae(){if(ee)return I;ee=1;var e=V;return I.createRoot=e.createRoot,I.hydrateRoot=e.hydrateRoot,I}var te=Ae();function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},M.apply(this,arguments)}var Le=function(t,o){o===void 0&&(o=!0),i.useEffect(function(){if(o){var r=function(p){p.key==="Escape"&&t(p)};return document.addEventListener("keyup",r),function(){o&&document.removeEventListener("keyup",r)}}},[t,o])},De=function(t,o){o===void 0&&(o=!0),i.useEffect(function(){if(o){var r=function(){t()};return window.addEventListener("resize",r),function(){o&&window.removeEventListener("resize",r)}}},[t,o])},Te=function(t,o,r){r===void 0&&(r=!0),i.useEffect(function(){if(r){var c=function(l){var f=Array.isArray(t)?t:[t],a=!1;f.forEach(function(u){if(!u.current||u.current.contains(l.target)){a=!0;return}}),l.stopPropagation(),a||o(l)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),function(){r&&(document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c))}}},[t,o,r])},Me=function(t,o){o===void 0&&(o=!0),i.useEffect(function(){if(o){var r=function(p){if(p.keyCode===9){var l,f=t==null||(l=t.current)===null||l===void 0?void 0:l.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),a=Array.prototype.slice.call(f);if(a.length===1){p.preventDefault();return}var u=a[0],d=a[a.length-1];p.shiftKey&&document.activeElement===u?(p.preventDefault(),d.focus()):document.activeElement===d&&(p.preventDefault(),u.focus())}};return document.addEventListener("keydown",r),function(){o&&document.removeEventListener("keydown",r)}}},[t,o])},We=typeof window<"u"?i.useLayoutEffect:i.useEffect,W={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},$e=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],ze=function(t,o,r,c,p){var l=p.offsetX,f=p.offsetY,a=c?8:0,u=r.split(" "),d=t.top+t.height/2,m=t.left+t.width/2,b=o.height,h=o.width,E=d-b/2,j=m-h/2,N="",C="0%",S="0%";switch(u[0]){case"top":E-=b/2+t.height/2+a,N="rotate(180deg)  translateX(50%)",C="100%",S="50%";break;case"bottom":E+=b/2+t.height/2+a,N="rotate(0deg) translateY(-100%) translateX(-50%)",S="50%";break;case"left":j-=h/2+t.width/2+a,N=" rotate(90deg)  translateY(50%) translateX(-25%)",S="100%",C="50%";break;case"right":j+=h/2+t.width/2+a,N="rotate(-90deg)  translateY(-150%) translateX(25%)",C="50%";break}switch(u[1]){case"top":E=t.top,C=t.height/2+"px";break;case"bottom":E=t.top-b+t.height,C=b-t.height/2+"px";break;case"left":j=t.left,S=t.width/2+"px";break;case"right":j=t.left-h+t.width,S=h-t.width/2+"px";break}return E=u[0]==="top"?E-f:E+f,j=u[0]==="left"?j-l:j+l,{top:E,left:j,transform:N,arrowLeft:S,arrowTop:C}},_e=function(t){var o={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if(typeof t=="string"){var r=document.querySelector(t);r!==null&&(o=r.getBoundingClientRect())}return o},Ie=function(t,o,r,c,p,l){var f=p.offsetX,a=p.offsetY,u={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},d=0,m=_e(l),b=Array.isArray(r)?r:[r];for((l||Array.isArray(r))&&(b=[].concat(b,$e));d<b.length;){u=ze(t,o,b[d],c,{offsetX:f,offsetY:a});var h={top:u.top,left:u.left,width:o.width,height:o.height};if(h.top<=m.top||h.left<=m.left||h.top+h.height>=m.top+m.height||h.left+h.width>=m.left+m.width)d++;else break}return u},Re=0,Fe=function(){var t=document.getElementById("popup-root");return t===null&&(t=document.createElement("div"),t.setAttribute("id","popup-root"),document.body.appendChild(t)),t},Ue=i.forwardRef(function(e,t){var o=e.trigger,r=o===void 0?null:o,c=e.onOpen,p=c===void 0?function(){}:c,l=e.onClose,f=l===void 0?function(){}:l,a=e.defaultOpen,u=a===void 0?!1:a,d=e.open,m=d===void 0?void 0:d,b=e.disabled,h=b===void 0?!1:b,E=e.nested,j=E===void 0?!1:E,N=e.closeOnDocumentClick,C=N===void 0?!0:N,S=e.repositionOnResize,it=S===void 0?!0:S,ae=e.closeOnEscape,pt=ae===void 0?!0:ae,se=e.on,$=se===void 0?["click"]:se,ie=e.contentStyle,lt=ie===void 0?{}:ie,pe=e.arrowStyle,X=pe===void 0?{}:pe,le=e.overlayStyle,ut=le===void 0?{}:le,ue=e.className,D=ue===void 0?"":ue,ce=e.position,ct=ce===void 0?"bottom center":ce,de=e.modal,fe=de===void 0?!1:de,he=e.lockScroll,me=he===void 0?!1:he,ve=e.arrow,Y=ve===void 0?!0:ve,be=e.offsetX,dt=be===void 0?0:be,xe=e.offsetY,ft=xe===void 0?0:xe,ge=e.mouseEnterDelay,ht=ge===void 0?100:ge,ye=e.mouseLeaveDelay,mt=ye===void 0?100:ye,we=e.keepTooltipInside,vt=we===void 0?!1:we,U=e.children,je=i.useState(m||u),k=je[0],Ee=je[1],O=i.useRef(null),y=i.useRef(null),A=i.useRef(null),Ce=i.useRef(null),ke=i.useRef("popup-"+ ++Re),w=fe?!0:!r,z=i.useRef(0);We(function(){return k?(Ce.current=document.activeElement,Se(),yt(),xt()):gt(),function(){clearTimeout(z.current)}},[k]),i.useEffect(function(){typeof m=="boolean"&&(m?q():P())},[m,h]);var q=function(s){k||h||(Ee(!0),setTimeout(function(){return p(s)},0))},P=function(s){var g;!k||h||(Ee(!1),w&&((g=Ce.current)===null||g===void 0||g.focus()),setTimeout(function(){return f(s)},0))},J=function(s){s==null||s.stopPropagation(),k?P(s):q(s)},H=function(s){clearTimeout(z.current),z.current=setTimeout(function(){return q(s)},ht)},bt=function(s){s==null||s.preventDefault(),J()},G=function(s){clearTimeout(z.current),z.current=setTimeout(function(){return P(s)},mt)},xt=function(){w&&me&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},gt=function(){w&&me&&(document.getElementsByTagName("body")[0].style.overflow="auto")},yt=function(){var s,g=y==null||(s=y.current)===null||s===void 0?void 0:s.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),v=Array.prototype.slice.call(g)[0];v==null||v.focus()};i.useImperativeHandle(t,function(){return{open:function(){q()},close:function(){P()},toggle:function(){J()}}});var Se=function(){if(!(w||!k)&&!(!(O!=null&&O.current)||!(O!=null&&O.current)||!(y!=null&&y.current))){var s=O.current.getBoundingClientRect(),g=y.current.getBoundingClientRect(),v=Ie(s,g,ct,Y,{offsetX:dt,offsetY:ft},vt);if(y.current.style.top=v.top+window.scrollY+"px",y.current.style.left=v.left+window.scrollX+"px",Y&&A.current){var L,_;A.current.style.transform=v.transform,A.current.style.setProperty("-ms-transform",v.transform),A.current.style.setProperty("-webkit-transform",v.transform),A.current.style.top=((L=X.top)===null||L===void 0?void 0:L.toString())||v.arrowTop,A.current.style.left=((_=X.left)===null||_===void 0?void 0:_.toString())||v.arrowLeft}}};Le(P,pt),Me(y,k&&w),De(Se,it),Te(r?[y,O]:[y],P,C&&!j);var wt=function(){for(var s={key:"T",ref:O,"aria-describedby":ke.current},g=Array.isArray($)?$:[$],v=0,L=g.length;v<L;v++)switch(g[v]){case"click":s.onClick=J;break;case"right-click":s.onContextMenu=bt;break;case"hover":s.onMouseEnter=H,s.onMouseLeave=G;break;case"focus":s.onFocus=H,s.onBlur=G;break}if(typeof r=="function"){var _=r(k);return!!r&&i.cloneElement(_,s)}return!!r&&i.cloneElement(r,s)},jt=function(){var s=w?W.popupContent.modal:W.popupContent.tooltip,g={className:"popup-content "+(D!==""?D.split(" ").map(function(v){return v+"-content"}).join(" "):""),style:M({},s,lt,{pointerEvents:"auto"}),ref:y,onClick:function(L){L.stopPropagation()}};return!fe&&$.indexOf("hover")>=0&&(g.onMouseEnter=H,g.onMouseLeave=G),g},Oe=function(){return i.createElement("div",Object.assign({},jt(),{key:"C",role:w?"dialog":"tooltip",id:ke.current}),Y&&!w&&i.createElement("div",{ref:A,style:W.popupArrow},i.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(D!==""?D.split(" ").map(function(s){return s+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:M({position:"absolute"},X)},i.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),U&&typeof U=="function"?U(P,k):U)},Et=!($.indexOf("hover")>=0),Ct=w?W.overlay.modal:W.overlay.tooltip,kt=[Et&&i.createElement("div",{key:"O","data-testid":"overlay","data-popup":w?"modal":"tooltip",className:"popup-overlay "+(D!==""?D.split(" ").map(function(x){return x+"-overlay"}).join(" "):""),style:M({},Ct,ut,{pointerEvents:C&&j||w?"auto":"none"}),onClick:C&&j?P:void 0,tabIndex:-1},w&&Oe()),!w&&Oe()];return i.createElement(i.Fragment,null,wt(),k&&V.createPortal(kt,Fe()))});function R(e){const[t,o]=Ke();t.render(n.jsx(qe,{...e,unmount:o}))}function qe({title:e,message:t,input:o,button:r,secondaryButtons:c,unmount:p}){function l(a){if(a==="Primary")return"btn-default";if(a==="Danger")return"btn-danger";if(a==="Secondary")return"btn-secondary"}function f(a,u){u(a).then(()=>p()).catch(d=>{p(),console.error("not sure",d)})}return n.jsxs(Ue,{position:"center center",open:!0,onClose:p,className:"snapshot-popup",children:[n.jsxs("header",{children:[n.jsx("div",{className:"buttons",children:n.jsx("button",{onClick:p,children:n.jsx("i",{className:"fa-regular fa-circle-xmark"})})}),n.jsx("h2",{children:e})]}),n.jsxs("main",{children:[n.jsx("div",{children:t}),o&&n.jsx("form",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("label",{children:o.label}),n.jsx("input",{placeholder:o.placeholder,defaultValue:o.value,onChange:a=>o.value=a.target.value,required:o.required})]})})]}),n.jsxs("footer",{children:[r&&n.jsx("button",{className:"btn "+l(r.type),onClick:a=>f(a,r.action),children:r.label}),c&&c.map(a=>n.jsx("button",{className:"btn "+l(a.type),onClick:u=>f(u,a.action),children:a.label}))]})]})}function Ke(){const e=document.createElement("div");document.body.appendChild(e);const t=te.createRoot(e);return[t,()=>{t.unmount(),e.remove()}]}function Xe(e){return async t=>{t.preventDefault();try{await e()}catch(o){F({title:"Error",message:o.message})}}}function F({title:e,message:t}){R({title:e,message:t})}async function Ye(e){const t=await e.json();if(Je(t)&&t.status!==200)throw new Error(t.message);return t}function Je(e){return typeof e=="object"&&"status"in e&&"message"in e}async function oe(e,t){const o=URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.setAttribute("download",t),r.click(),URL.revokeObjectURL(o)}async function He(e){KNOWWE.editCommons.showAjaxLoader();const t=await fetch(`action/CreateSnapshotAction?name=${e}`);if(KNOWWE.editCommons.hideAjaxLoader(),t.status!==200){const o=await t.json();throw new Error(o.message)}window.location.reload()}async function Ge(e){KNOWWE.editCommons.showAjaxLoader();let t=await fetch(`action/DeploySnapshotAction?deploy_file=${e}`);if(KNOWWE.editCommons.hideAjaxLoader(),t.status!==200){const o=await t.json();throw new Error(o.message)}window.location.reload()}async function Ve(e,t){KNOWWE.editCommons.showAjaxLoader();const o=await fetch(`action/DownloadFileAction?file=${e}&delete=false`);if(await oe(await o.blob(),t+".zip"),KNOWWE.editCommons.hideAjaxLoader(),o.status!==200){const r=await o.json();throw new Error(r.message)}}async function Qe(e){KNOWWE.editCommons.showAjaxLoader();const t=new FormData;t.append("file",e);const o=await fetch(`action/UploadSnapshotAction?X-XSRF-TOKEN=${Wiki.CsrfProtection}`,{method:"POST",body:t});if(KNOWWE.editCommons.hideAjaxLoader(),o.status!==200){const r=await o.json();throw new Error(r.message)}}async function Ze(e,t){KNOWWE.editCommons.showAjaxLoader();const o=await fetch(`action/DownloadFileAction?file=${e}&delete=true`);if(await oe(await o.blob(),t+".zip"),KNOWWE.editCommons.hideAjaxLoader(),o.status!==200){const r=await o.json();throw new Error(r.message)}window.location.reload()}const ne=i.createContext({currentContextMenu:"",setCurrentContextMenu:e=>{}});function Be(){const[e,t]=i.useState(),[o,r]=i.useState();if(i.useEffect(()=>{fetch("action/ListSnapshotsAction").then(Ye).then(t).catch(r)},[]),o)return n.jsx("div",{children:n.jsx("p",{children:o.message})});const c=e==null?void 0:e.filter(a=>!a.name.includes("AutosaveSnapshot")),p=e==null?void 0:e.filter(a=>a.name.includes("AutosaveSnapshot")),[l,f]=i.useState("");return n.jsx(ne.Provider,{value:{currentContextMenu:l,setCurrentContextMenu:f},children:n.jsxs("div",{children:[!e&&n.jsx("div",{children:n.jsx("div",{className:"versioning-spinner"})}),e&&e.length===0&&n.jsx("p",{children:"No Snapshots yet."}),e&&e.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"headline",children:[n.jsx("h3",{children:"Snapshots"}),n.jsx("div",{className:"counter",children:n.jsx("span",{children:c?c.length:0})})]}),n.jsx(re,{snapshots:c}),n.jsxs("div",{className:"headline",children:[n.jsx("h3",{children:"Autosave Snapshots"}),n.jsx("div",{className:"counter",children:n.jsx("span",{children:p?p.length:0})})]}),n.jsx(re,{snapshots:p})]})]})})}function re({snapshots:e}){if(e===void 0)return null;const t=i.useContext(ne);return n.jsx("table",{className:"snapshots-table",children:n.jsx("tbody",{children:e.length>0&&e.map(o=>n.jsxs("tr",{children:[n.jsx("td",{title:o.name+".zip",className:"truncate",children:o.name}),KNOWWE.core.util.isAdmin()==="true"&&n.jsx("td",{children:n.jsxs("div",{className:"context-menu relative",children:[n.jsx("button",{className:"btn btn-default context-menu",onClick:()=>t.currentContextMenu===o.path?t.setCurrentContextMenu(""):t.setCurrentContextMenu(o.path),children:n.jsx("i",{className:"fa-regular fa-ellipsis-vertical"})}),t.currentContextMenu===o.path&&n.jsx(et,{snapshot:o})]})})]}))})})}function et({snapshot:e}){const t=(e.size/1048576).toFixed(2);return n.jsxs("ul",{className:"options absolute",children:[n.jsx("li",{children:n.jsxs("button",{title:`Download this snapshot (${t} MB)`,onClick:()=>Ve(e.path,e.name),children:[n.jsx("i",{className:"fa-regular fa-arrow-down-to-bracket"}),"Download"]})}),n.jsx("li",{children:n.jsxs("button",{title:"Deploy this snapshot to the wiki",onClick:()=>ot(e.name),children:[n.jsx("i",{className:"fa-regular fa-rocket-launch"}),"Deploy"]})}),n.jsx("li",{children:n.jsxs("button",{title:"Delete this snapshot from the wiki permanently ("+t+" MB)",onClick:()=>tt({snapshotPath:e.path,snapshotName:e.name}),children:[n.jsx("i",{className:"fa-regular fa-trash"}),"Delete"]})})]})}function tt(e){R({title:"Delete",message:n.jsxs("p",{children:["Are you sure you want to delete ",n.jsxs("b",{children:[e.snapshotName," ?"]})]}),button:{label:"Delete Snapshot",type:"Danger",action:()=>Ze(e.snapshotPath,e.snapshotName).catch(t=>F({title:"Error",message:"Failed to download file"}))}})}function ot(e){R({title:"Deploy",message:n.jsxs("p",{children:["Are you sure you want to deploy ",n.jsxs("b",{children:[e," to the Wiki ?"]})]}),button:{label:"Deploy Snapshot",type:"Primary",action:()=>Ge(e+".zip").catch(t=>F({title:"Error",message:t.message}))}})}function nt(e){te.createRoot(e).render(n.jsx(rt,{}))}function rt(){return n.jsxs("div",{className:"snapshots-panel",children:[KNOWWE.core.util.isAdmin()==="true"?n.jsxs("div",{className:"buttons",children:[n.jsx("button",{className:"btn btn-default",onClick:at,children:"Create Snapshot"}),n.jsxs("div",{className:"upload-button",children:[n.jsxs("label",{className:"btn btn-default",children:[n.jsx("i",{className:"fa-solid fa-arrow-up-from-bracket"}),"Upload Snapshot"]}),n.jsx("input",{type:"file",name:"file",onChange:st})]})]}):"",n.jsx(Be,{})]})}async function at(){const e={label:"Snapshot name",value:"",required:!0};R({title:"Create",message:n.jsxs("div",{children:["Specify a ",n.jsx("b",{children:"name"})," for your snapshot:"]}),input:e,button:{label:"Create Snapshot",type:"Primary",action:Xe(()=>He(e.value))}})}async function st(e){try{const t=e.target;if(typeof t.files>"u"||!t.files||t.files.length===0)return;const o=t.files[0];await Qe(o),window.location.reload()}catch(t){F({title:"Error",message:t.message})}}jq$(()=>{jq$("[data-name='SnapshotControlPanel'] .markupText").each((e,t)=>nt(t))})})(React,ReactDOM);
